/*! storejs v1.0.24 | MIT (c) 2018 kenny wang <wowohoo@qq.com> | https://github.com/jaywcjlove/store.js */
"use strict";var storage=window.localStorage,_inMemoryStorage={},_length=0;function isJSON(t){return t=JSON.stringify(t),/^\{[\s\S]*\}$/.test(t)}function stringify(t){return void 0===t||"function"==typeof t?t+"":JSON.stringify(t)}function deserialize(e){if("string"==typeof e)try{return JSON.parse(e)}catch(t){return e}}function isFunction(t){return"[object Function]"==={}.toString.call(t)}function isArray(t){return"[object Array]"===Object.prototype.toString.call(t)}function Store(){if(!(this instanceof Store))return new Store}(function(){var t="_Is_Incognit";try{return storage.setItem(t,"yes"),storage.removeItem(t),!0}catch(t){return!1}})()||(storage.__proto__={setItem:function(t,e){_inMemoryStorage[t]=""+e,_inMemoryStorage.hasOwnProperty(t)||_length++},getItem:function(t){return t in _inMemoryStorage?_inMemoryStorage[t]:null},removeItem:function(t){_inMemoryStorage.hasOwnProperty(t)&&(delete _inMemoryStorage[t],_length--)},clear:function(){_inMemoryStorage={},_length=0},length:function(){return _length},key:function(t){return Object.keys(_inMemoryStorage)[t]||null}}),Store.prototype={set:function(t,e){if(t&&!isJSON(t))storage.setItem(t,stringify(e));else if(isJSON(t))for(var r in t)this.set(r,t[r]);return this},get:function(t){if(t)return"?"===t.charAt(0)?this.has(t.substr(1)):deserialize(storage.getItem(t));var r={};return this.forEach(function(t,e){return r[t]=e}),r},clear:function(){return storage.clear(),this},remove:function(t){var e=this.get(t);return storage.removeItem(t),e},has:function(t){return{}.hasOwnProperty.call(this.get(),t)},keys:function(){var e=[];return this.forEach(function(t){e.push(t)}),e},forEach:function(t){for(var e=0,r=storage.length;e<r;e++){var n=storage.key(e);t(n,this.get(n))}return this},search:function(t){for(var e=this.keys(),r={},n=0,o=e.length;n<o;n++)-1<e[n].indexOf(t)&&(r[e[n]]=this.get(e[n]));return r}};var _Store=null;function store(t,e){var r=arguments,n=null;if(_Store||(_Store=Store()),0===r.length)return _Store.get();if(1===r.length){if("string"==typeof t)return _Store.get(t);if(isJSON(t))return _Store.set(t)}if(2===r.length&&"string"==typeof t){if(!e)return _Store.remove(t);if(e&&"string"==typeof e)return _Store.set(t,e);e&&isFunction(e)&&(n=null,n=e(t,_Store.get(t)),store.set(t,n))}if(2===r.length&&isArray(t)&&isFunction(e))for(var o=0,i=t.length;o<i;o++)n=e(t[o],_Store.get(t[o])),store.set(t[o],n);return store}for(var a in Store.prototype)store[a]=Store.prototype[a];module.exports=store;